*** Unit Test Error Report ***

Command failed: npx jest ex5-pokerDiceChain.test.js --colors
Browserslist: caniuse-lite is outdated. Please run:
  npx browserslist@latest --update-db
  Why you should do it regularly: https://github.com/browserslist/browserslist#browsers-data-updating
 FAIL  3-UsingAPIs/Week1/unit-tests/ex5-pokerDiceChain.test.js
  ex5-pokerDiceChain
    √ should exist and be executable (1 ms)
    √ should have all TODO comments removed
    √ `rollDice` should not contain unneeded console.log calls
    × should resolve when all dice settle successfully (1 ms)
    √ should reject with an Error when a die rolls off the table (1 ms)

  ● ex5-pokerDiceChain › should resolve when all dice settle successfully

    expect(received).toBeInstanceOf(expected)

    Expected constructor: Promise

    Received value has no prototype
    Received value: undefined

      30 |
      31 |     const promise = rollDice();
    > 32 |     expect(promise).toBeInstanceOf(Promise);
         |                     ^
      33 |     const result = await promise;
      34 |     expect(Array.isArray(result)).toBe(true);
      35 |     expect(result).toHaveLength(5);

      at Object.toBeInstanceOf (3-UsingAPIs/Week1/unit-tests/ex5-pokerDiceChain.test.js:32:21)

  ● ex5-pokerDiceChain › should resolve when all dice settle successfully

    expect.assertions(4)

    Expected four assertions to be called but received two assertion calls.

      24 |
      25 |   test('should resolve when all dice settle successfully', async () => {
    > 26 |     expect.assertions(4);
         |            ^
      27 |     expect(exported).toBeDefined();
      28 |
      29 |     const randomSpy = jest.spyOn(Math, 'random').mockReturnValue(0);

      at Object.assertions (3-UsingAPIs/Week1/unit-tests/ex5-pokerDiceChain.test.js:26:12)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 4 passed, 5 total
Snapshots:   0 total
Time:        0.281 s, estimated 1 s
Ran all test suites matching /ex5-pokerDiceChain.test.js/i.
node:internal/process/promises:289
            triggerUncaughtException(err, true /* fromPromise */);
            ^

[UnhandledPromiseRejection: This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). The promise rejected with the reason "rejected".] {
  code: 'ERR_UNHANDLED_REJECTION'
}

Node.js v20.1.0